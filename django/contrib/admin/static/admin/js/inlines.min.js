(function(a){a.fn.formset=function(b){var c=a.extend({},a.fn.formset.defaults,b);var d=function(b,c,d){var e=new RegExp("("+c+"-(\\d+|__prefix__))");var f=c+"-"+d;if(a(b).prop("for")){a(b).prop("for",a(b).prop("for").replace(e,f))}if(b.id){b.id=b.id.replace(e,f)}if(b.name){b.name=b.name.replace(e,f)}};var e=a("#id_"+c.prefix+"-TOTAL_FORMS").prop("autocomplete","off");var f=parseInt(e.val());var g=a("#id_"+c.prefix+"-MAX_NUM_FORMS").prop("autocomplete","off");var h=g.val()==""||g.val()-e.val()>0;a(this).each(function(b){a(this).not("."+c.emptyCssClass).addClass(c.formCssClass)});if(a(this).length&&h){var i;if(a(this).attr("tagName")=="TR"){var j=this.eq(0).children().length;a(this).parent().append('<tr class="'+c.addCssClass+'"><td colspan="'+j+'"><a href="javascript:void(0)">'+c.addText+"</a></tr>");i=a(this).parent().find("tr:last a")}else{a(this).filter(":last").after('<div class="'+c.addCssClass+'"><a href="javascript:void(0)">'+c.addText+"</a></div>");i=a(this).filter(":last").next().find("a")}i.click(function(){var b=a("#id_"+c.prefix+"-TOTAL_FORMS");var e=a("#"+c.prefix+"-empty");var h=e.clone(true);h.removeClass(c.emptyCssClass).addClass(c.formCssClass).attr("id",c.prefix+"-"+f);if(h.is("tr")){h.children(":last").append('<div><a class="'+c.deleteCssClass+'" href="javascript:void(0)">'+c.deleteText+"</a></div>")}else if(h.is("ul")||h.is("ol")){h.append('<li><a class="'+c.deleteCssClass+'" href="javascript:void(0)">'+c.deleteText+"</a></li>")}else{h.children(":first").append('<span><a class="'+c.deleteCssClass+'" href="javascript:void(0)">'+c.deleteText+"</a></span>")}h.find("*").each(function(){d(this,c.prefix,b.val())});h.insertBefore(a(e));a(b).val(parseInt(b.val())+1);f+=1;if(g.val()!=""&&g.val()-b.val()<=0){i.parent().hide()}h.find("a."+c.deleteCssClass).click(function(){var b=a(this).parents("."+c.formCssClass);b.remove();f-=1;if(c.removed){c.removed(b)}var e=a("."+c.formCssClass);a("#id_"+c.prefix+"-TOTAL_FORMS").val(e.length);if(g.val()==""||g.val()-e.length>0){i.parent().show()}for(var h=0,j=e.length;h<j;h++){d(a(e).get(h),c.prefix,h);a(e.get(h)).find("*").each(function(){d(this,c.prefix,h)})}return false});if(c.added){c.added(h)}return false})}return this};a.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",emptyCssClass:"empty-row",formCssClass:"dynamic-form",added:null,removed:null}})(django.jQuery)