(function(a){a.fn.actions=function(b){var c=a.extend({},a.fn.actions.defaults,b);var d=a(this);var e=false;checker=function(b){if(b){showQuestion()}else{reset()}a(d).prop("checked",b).parent().parent().toggleClass(c.selectedClass,b)};updateCounter=function(){var b=a(d).filter(":checked").length;a(c.counterContainer).html(interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",b),{sel:b,cnt:_actions_icnt},true));a(c.allToggle).prop("checked",function(){if(b==d.length){value=true;showQuestion()}else{value=false;clearAcross()}return value})};showQuestion=function(){a(c.acrossClears).hide();a(c.acrossQuestions).show();a(c.allContainer).hide()};showClear=function(){a(c.acrossClears).show();a(c.acrossQuestions).hide();a(c.actionContainer).toggleClass(c.selectedClass);a(c.allContainer).show();a(c.counterContainer).hide()};reset=function(){a(c.acrossClears).hide();a(c.acrossQuestions).hide();a(c.allContainer).hide();a(c.counterContainer).show()};clearAcross=function(){reset();a(c.acrossInput).val(0);a(c.actionContainer).removeClass(c.selectedClass)};a(c.counterContainer).show();a(this).filter(":checked").each(function(b){a(this).parent().parent().toggleClass(c.selectedClass);updateCounter();if(a(c.acrossInput).val()==1){showClear()}});a(c.allToggle).show().click(function(){checker(a(this).prop("checked"));updateCounter()});a("div.actions span.question a").click(function(b){b.preventDefault();a(c.acrossInput).val(1);showClear()});a("div.actions span.clear a").click(function(b){b.preventDefault();a(c.allToggle).prop("checked",false);clearAcross();checker(0);updateCounter()});lastChecked=null;a(d).click(function(b){if(!b){var b=window.event}var e=b.target?b.target:b.srcElement;if(lastChecked&&a.data(lastChecked)!=a.data(e)&&b.shiftKey==true){var f=false;a(lastChecked).prop("checked",e.checked).parent().parent().toggleClass(c.selectedClass,e.checked);a(d).each(function(){if(a.data(this)==a.data(lastChecked)||a.data(this)==a.data(e)){f=f?false:true}if(f){a(this).prop("checked",e.checked).parent().parent().toggleClass(c.selectedClass,e.checked)}})}a(e).parent().parent().toggleClass(c.selectedClass,e.checked);lastChecked=e;updateCounter()});a("form#changelist-form table#result_list tr").find("td:gt(0) :input").change(function(){e=true});a('form#changelist-form button[name="index"]').click(function(a){if(e){return confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))}});a('form#changelist-form input[name="_save"]').click(function(b){var c=false;a("div.actions select option:selected").each(function(){if(a(this).val()){c=true}});if(c){if(e){return confirm(gettext("You have selected an action, but you haven't saved your changes to individual fields yet. Please click OK to save. You'll need to re-run the action."))}else{return confirm(gettext("You have selected an action, and you haven't made any changes on individual fields. You're probably looking for the Go button rather than the Save button."))}}})};a.fn.actions.defaults={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggle:"#action-toggle",selectedClass:"selected"}})(django.jQuery)